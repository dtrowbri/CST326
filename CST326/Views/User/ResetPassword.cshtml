@model CST326.Models.UserModel
@{
    ViewBag.Title = "Login";
    Layout = "~/Views/Shared/_CustomLayout.cshtml";
}

<script>
    function ValidatePasswordMatch() {
        var passwordlabel = document.getElementById("PasswordLabel");
        var passwordValidatorLabel = document.getElementById("PasswordValidatorLabel");

        if (passwordlabel.value != passwordValidatorLabel.value) {
            document.getElementById("PasswordMatchErrorMessage").innerHTML = "Password do not match!";
            document.getElementById("ResetButton").disabled = true;
        } else {
            document.getElementById("PasswordMatchErrorMessage").innerHTML = null;
            document.getElementById("ResetButton").disabled = false;
        }
    }

</script>


<div>
    <div class="formcenter">
        <h2>Reset Password</h2>
        <div class="form-group">
            @Html.ValidationMessageFor(m => Model.Email, "", new { @class = "text-danger" })
            <span class="field-validation-valid text-danger" data-valmsg-for="Password" data-valmsg-replace="true" id="PasswordMatchErrorMessage"></span>
        </div>
        @using (Html.BeginForm("ResetPassword", "User", FormMethod.Post))
        {
            <div class="form-group">
                @Html.Label("Email", htmlAttributes: new { @class = "col-md-3 col-form-label" })
                @Html.EditorFor(model => model.Email, new { htmlAttributes = new { @class = "form-control" } })
            </div>
            <div class="form-group">
                @Html.Label("Password", htmlAttributes: new { @class = "col-md-3 col-form-label" })
                @Html.PasswordFor(model => model.Password, htmlAttributes: new { @class = "form-control", onkeyup = "ValidatePasswordMatch()", id = "PasswordLabel" })
            </div>
            <div class="form-group">
                @Html.Label("Password", htmlAttributes: new { @class = "col-md-3 col-form-label" })
                <input type="password" onkeyup="ValidatePasswordMatch()" id="PasswordValidatorLabel" class="form-control" />
            </div>
            <div class="col-md-offset-3 form-group">
                <button type="submit" class="btn btn-primary" id="ResetButton">Reset Password</button>
            </div>
        }

    </div>
</div>
